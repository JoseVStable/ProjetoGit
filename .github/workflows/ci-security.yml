name: Static Web Security Check

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  security_scan:
    runs-on: ubuntu-latest
    steps:
      - name: â¬‡ï¸ Checkout do CÃ³digo
        uses: actions/checkout@v4
        
      # ----------------------------------------------------
      # SAST - AnÃ¡lise de CÃ³digo EstÃ¡tico (HTML/CSS)
      # ----------------------------------------------------
      
      - name: ğŸ› ï¸ Instalar Ferramentas de VerificaÃ§Ã£o (Exemplo com HTMLHint)
        # Este passo depende das ferramentas que vocÃª quer usar.
        # Se vocÃª tiver dependÃªncias Node (ex: usando npm/yarn), vocÃª precisaria de setup-node.
        # Para simplicidade, vamos assumir que vocÃª quer verificar Apenas o HTML/CSS
        run: |
          # Exemplo: Se vocÃª tivesse um package.json com 'npm install'
          # npm install
          echo "Aguardando implementaÃ§Ã£o do SAST de HTML/CSS..."
          # Para projetos puramente estÃ¡ticos, vocÃª pode pular o SAST ou usar scanners online/GitHub Advanced Security.
          
      # ----------------------------------------------------
      # DAST - AnÃ¡lise DinÃ¢mica (OWASP ZAP)
      # ----------------------------------------------------
      
      - name: ğŸš€ Iniciar Servidor Simples (Para DAST)
        # Usamos o 'serve' para hospedar os arquivos HTML/CSS estÃ¡ticos
        run: npx serve -s . -l 3000 & # Roda na pasta atual '.' na porta 3000
        run: sleep 5 # Espera o servidor iniciar
        
      - name: ğŸ’¥ DAST - OWASP ZAP Baseline Scan
        uses: zaproxy/action-baseline@v0.12.0
        with:
          target: 'http://localhost:3000' # Escaneia a pÃ¡gina servida localmente
          fail_action: true # Falha o pipeline se encontrar vulnerabilidades